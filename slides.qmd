---
title: "Initiation √† l'analyse des donn√©es avec R"
subtitle: "Formation th√©orique | 9h √† 12h"
author: "√âtienne Proulx"
date: today
date-format: "D MMMM YYYY"
lang: fr
format:
  revealjs:
    theme: simple
    logo: https://upload.wikimedia.org/wikipedia/en/thumb/9/90/Ulaval_Shield.svg/800px-Ulaval_Shield.svg.png
    footer: "[Facult√© des sciences sociales](https://www.fss.ulaval.ca)"
    transition: slide
    transition-speed: fast
    code-fold: false
    code-overflow: wrap
    code-copy: true
    incremental: false
    slide-number: true
    show-slide-number: all

execute:
  echo: true
  eval: true
  warning: false
  message: false
---

```{r setup}
#| include: false
library(ggplot2)
library(dplyr)
library(readr)
```

## Objectifs de l'atelier {.smaller}

- Introduire R pour l'analyse de donn√©es
  - Interface RStudio et console
  - Les objets et types de donn√©es
  - Les fonctions et packages
  - Import et manipulation de donn√©es
  - Analyse descriptive et graphiques

> Le but est que vous puissiez sortir d'ici avec une compr√©hension de base de R et que vous soyez capable d'aller chercher des ressources pour continuer √† apprendre.

---

## Qu'est-ce que R ? {.smaller}

::: {.columns}
::: {.column width="50%"}
**R c'est :**

- Un langage de programmation pour l'analyse de donn√©es
- Gratuit et open-source
- Une communaut√© active mondiale
- Plus de 21,000 packages sp√©cialis√©s

:::

::: {.column width="50%"}
**Pourquoi l'utiliser ?**

- Adapt√© aux sciences sociales
- Analyses reproductibles et transparentes
- Visualisations de qualit√© professionnelle
- Comp√©tence recherch√©e en recherche et industrie

:::
:::

<br>

> Aujourd'hui nous allons apprendre les bases pour analyser de vraies donn√©es

---

## Pourquoi R en sciences sociales ? {.smaller background-color="#2C5F77"}

![](https://upload.wikimedia.org/wikipedia/commons/thumb/1/1b/R_logo.svg/1024px-R_logo.svg.png){.absolute top=0 left=900 width="20%"}

::: {style="color: white;"}

**R est utilis√© dans la vraie vie :**

::: {.columns}
::: {.column width="50%"}
**Organisations :**

- [AirBnB](https://medium.com/airbnb-engineering/using-r-packages-and-education-to-scale-data-science-at-airbnb-906faa58e12d) - analyse de donn√©es
- [BBC](https://bbc.github.io/rcookbook/) - graphiques journalistiques
- Google, Facebook, Amazon - data science

:::

::: {.column width="50%"}
**Recherche au Qu√©bec :**

- [Vox Pop Labs](https://github.com/voxpoplabs) (Boussole √©lectorale)
- CLESSN (Universit√© Laval)
- Nombreux chercheurs en sciences sociales

:::
:::
:::

---

## Visualisations avanc√©es avec R {.smaller background-color="#4A90A4"}

::: {style="color: white;"}

**Suivi quotidien des intentions de vote - √âlections f√©d√©rales 2025**

:::

![](https://github.com/clessn/agregateur_data/blob/main/img/daily_gif_fr.gif?raw=true){fig-align="center" width="80%"}

::: {.callout-note}
Animation g√©n√©r√©e automatiquement chaque jour avec R - Centre d'analyse des politiques publiques
:::

---

## Au-del√† des chiffres {.smaller background-color="#2C5F77"}

::: {style="color: white;"}

**R s'adapte √† tous types de donn√©es**

::: {.columns}
::: {.column width="50%"}
**Texte :**

- Analyse de sentiment
- Classification de documents
- Transcription audio
- Extraction d'informations

:::

::: {.column width="50%"}
**Multim√©dia :**

- Analyse d'images
- Cr√©ation de vid√©os
- Infographies automatis√©es
- Pr√©sentations interactives

:::
:::
:::

---

## Applications web interactives avec Shiny {.smaller background-color="#4A90A4"}

::: {style="color: white;"}

**Explorez vos donn√©es de mani√®re interactive**

:::

[![](images/shiny.png){width="80%"}](https://nz-stefan.shinyapps.io/commute-explorer-2/)

::: {.callout-tip}
Cliquez sur l'image pour voir l'[application en action](https://nz-stefan.shinyapps.io/commute-explorer-2/)
:::

---

## Applications Shiny : possibilit√©s infinies {.smaller background-color="#5B4E77"}

::: {style="color: white;"}

**Transformez vos analyses en outils accessibles**
**Exemples d'utilisation :**

- Tableaux de bord de suivi
- Explorateurs de donn√©es interactifs
- Outils de collecte de donn√©es
- Simulateurs et calculateurs
- Rapports personnalis√©s

::: {.callout-note}
Aucune connaissance en d√©veloppement web n√©cessaire
:::
:::

---

## Et apr√®s R ? {.smaller background-color="#2C5F77"}

::: {style="color: white;"}

**Apprendre R ouvre la porte √† d'autres langages**

Les concepts appris en R se transf√®rent facilement :

::: {.columns}
::: {.column width="50%"}
**Analyse de donn√©es :**

- Python (data science)
- Julia (calcul scientifique)
- SQL (bases de donn√©es)

:::

::: {.column width="50%"}
**D√©veloppement :**

- JavaScript (web interactif)
- HTML/CSS (pr√©sentation)
- Bash (automatisation)

:::
:::

::: {.callout-note}
Une fois qu'on ma√Ætrise un langage de programmation, les autres deviennent beaucoup plus faciles √† apprendre
:::
:::

---

## Installer R et RStudio {.smaller}

::: {.columns}
::: {.column width="50%"}
**Quelle est la diff√©rence ?**

- R est le moteur, RStudio est le v√©hicule
- R est le langage, RStudio est la feuille de papier
- RStudio facilite l'utilisation de R
- RStudio est un IDE (Integrated Development Environment)
- Personnalisation de l'environnement de travail
:::

::: {.column width="50%"}
**Liens de t√©l√©chargement :**

- [Installer R](https://cran.r-project.org/)
- [Installer RStudio](https://www.rstudio.com/products/rstudio/download/)
:::
:::

---

## Avant de commencer √† coder : RStudio {.smaller}

![](images/rstudio.png){.absolute top="100" left="0" width="100%" height="80%"}

::: {.absolute top="250" left="80" style="background-color: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; max-width: 280px;"}
**Script**  
O√π on √©crit notre code
:::

::: {.absolute top="200" left="600" style="background-color: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; max-width: 280px;"}
**Environment**  
Nos objets et donn√©es
:::

::: {.absolute top="500" left="80" style="background-color: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; max-width: 280px;"}
**Console**  
O√π s'ex√©cutent les commandes
:::

::: {.absolute top="450" left="600" style="background-color: rgba(255,255,255,0.9); padding: 15px; border-radius: 10px; max-width: 280px;"}
**Files/Plots**  
Fichiers et graphiques
:::

---

## R comme calculatrice {.smaller}

::: {.callout-tip}
## √Ä tester dans la console
:::

```{r}
#| code-copy: true
# Op√©rations de base
2 + 3
10 * 5
15 / 3
sqrt(16)
```

::: {.fragment}
```{r}
#| code-copy: true
# Un peu plus complexe
(10 + 5) * 2
2^3  # puissance
```
:::


---

## Cr√©er nos premiers objets {.smaller}

En R, on sauvegarde tout dans des **objets** avec `<-`

```{r}
# Cr√©er des objets simples
film_prefere <- "Dune"
annee_sortie <- 2021
note_imdb <- 8.0
```

```{r}
# Voir le contenu des objets
film_prefere
annee_sortie
note_imdb
```

::: {.callout-note}
**Important :** Les objets apparaissent dans le panneau Environment de RStudio !
:::

---

## Les vecteurs : groupes de valeurs

```{r}
# Cr√©er des vecteurs avec la fonction c()
films <- c("Dune", "Oppenheimer", "Barbie", "The Zone of Interest", "Killers of the Flower Moon")
annees <- c(2021, 2023, 2023, 2023, 2023)
notes_imdb <- c(8.0, 8.3, 6.8, 7.4, 7.6)
```

```{r}
# Explorer nos vecteurs
films
length(films)     # nombre de films
mean(notes_imdb)  # note moyenne
```

---

## Types de donn√©es : attention aux pi√®ges !

```{r}
# V√©rifier le type de nos objets
class(notes_imdb)    # num√©rique - parfait pour calculer
class(films)         # caract√®re (texte)
class(c(TRUE, FALSE))  # logique
```

::: {.callout-warning}
## Probl√®me fr√©quent en analyse de donn√©es
Parfois, des nombres sont stock√©s comme du texte dans vos donn√©es. R ne peut pas calculer avec du texte !
:::

---

## Types de donn√©es : attention aux pi√®ges !

```{r}
# Exemple de coercition automatique (√† surveiller !)
notes_mixtes <- c(8.0, 7.5, "6.8")  # un chiffre √©crit en texte
notes_mixtes
class(notes_mixtes)  # tout devient du texte !
```

```{r}
# Impossible de calculer maintenant
 mean(notes_mixtes)  # Ceci produira une erreur !
```

---

## Solution : convertir les types

```{r}
# Convertir du texte en num√©rique
notes_numeriques <- as.numeric(notes_mixtes)
notes_numeriques
class(notes_numeriques)

# Maintenant on peut calculer
mean(notes_numeriques)
```

::: {.callout-tip}
## Bonne pratique
Toujours v√©rifier le type de vos variables avec `class()` avant de faire des calculs !
:::

---

## Notre premier tableau de donn√©es

Un **data frame** = tableau avec lignes et colonnes

```{r}
# Cr√©er notre base de donn√©es de films
cinema <- data.frame(
  titre = c("Dune", "Oppenheimer", "Barbie", "The Zone of Interest", "Killers of the Flower Moon"),
  annee = c(2021, 2023, 2023, 2023, 2023),
  note = c(8.0, 8.3, 6.8, 7.4, 7.6),
  genre = c("Sci-Fi", "Biographie", "Com√©die", "Drame", "Drame")
)
```

```{r}
# Regarder notre tableau
cinema
```

---

## Explorer un data frame

```{r}
# Informations g√©n√©rales
dim(cinema)       # dimensions (lignes x colonnes)
nrow(cinema)      # nombre de films
ncol(cinema)      # nombre de variables
names(cinema)     # noms des colonnes
```

---

## Explorer un data frame

```{r}
# Aper√ßu du contenu
head(cinema, 3)   # premiers films
str(cinema)       # structure d√©taill√©e
```

---

## Acc√©der aux colonnes

### Avec le symbole `$` (recommand√©)

```{r}
cinema$titre
cinema$note
mean(cinema$note)  # note moyenne
```

---

## Acc√©der aux colonnes
### Avec les crochets `[ ]`

```{r}
cinema[, "titre"]          # par nom
cinema[, 1]                # par position
cinema[, c("titre", "genre")] # plusieurs colonnes
```

---

## Les fonctions : nos outils

Une **fonction** fait une t√¢che : `fonction(argument1, argument2)`

```{r}
# Fonctions statistiques essentielles
mean(cinema$note)      # note moyenne
median(cinema$note)    # note m√©diane
sd(cinema$note)        # √©cart-type
min(cinema$note)       # note minimale
max(cinema$note)       # note maximale
```

---

## Les fonctions : nos outils

```{r}
# R√©sum√© complet d'une variable
summary(cinema$note)
```

```{r}
# Compter les occurrences
table(cinema$genre)    # combien de films par genre ?
```

---

## Les packages : √©tendre R {.smaller}

**Les packages sont comme des applications pour R**

- R de base = fonctions essentielles
- Packages = fonctions sp√©cialis√©es cr√©√©es par la communaut√©
- Plus de 21,000 packages disponibles sur CRAN
- Chaque package r√©sout des probl√®mes sp√©cifiques

::: {.callout-tip}
## Analogie
R de base = t√©l√©phone vide  
Packages = applications qu'on t√©l√©charge
:::

---

## Le Tidyverse : votre bo√Æte √† outils {.smaller}

**Collection de packages pour l'analyse de donn√©es moderne**

::: {.columns}
::: {.column width="50%"}
**Packages principaux :**

- `readr` : importer des donn√©es
- `dplyr` : manipuler des donn√©es
- `ggplot2` : cr√©er des graphiques
- `tidyr` : nettoyer des donn√©es
:::

::: {.column width="50%"}
**Avantages :**

- Syntaxe coh√©rente et intuitive
- Tr√®s utilis√© en sciences sociales
- Documentation excellente
- S'installe en un seul package !
:::
:::

```{r}
#| eval: false
#| code-copy: true
# Installer le Tidyverse (contient plusieurs packages)
install.packages("tidyverse")
```

---

## Installation vs Chargement {.smaller}

::: {.callout-important}
## Diff√©rence cruciale
- `install.packages("nom")` : t√©l√©charger le package (1 seule fois)
- `library(nom)` : activer le package (√† chaque session R)
:::

**Installer des packages**

```{r}
#| eval: false
#| code-copy: true
# Exemples d'installation (√† faire une fois)
install.packages("tidyverse")
install.packages("readxl")
install.packages("janitor")
```

::: {.fragment}
**Charger des packages**

```{r}
#| code-copy: true
# √Ä faire au d√©but de chaque script
library(tidyverse)
library(readxl)
```
:::

::: {.callout-tip}
## Bonne pratique
Mettez toujours vos `library()` au d√©but de votre script
:::

---


## Comprendre l'organisation de votre ordinateur {.smaller}

::: {.callout-important}
## Votre ordinateur = une grande biblioth√®que
Chaque fichier a une **adresse pr√©cise** pour le retrouver !
:::

**Exemple d'organisation :**
```
üìÅ Mon ordinateur
  üìÅ Documents
    üìÅ Universit√©
      üìÅ Session_Hiver2024
        üìÅ Cours_R
          üìÑ donnees.csv
          üìÑ mon_script.R
```

**L'adresse compl√®te (chemin) :**

- Windows : `C:/Documents/Universit√©/Session_Hiver2024/Cours_R/`
- Mac : `/Users/votrenom/Documents/Universit√©/Session_Hiver2024/Cours_R/`

---

## O√π travaille R en ce moment ? {.smaller}

::: {.callout-tip}
## √Ä tester maintenant !
:::

```{r}
#| code-copy: true
# O√π suis-je actuellement ?
getwd()  # "get working directory" = obtenir le dossier de travail
```

::: {.fragment}
```{r}
#| code-copy: true
# Qu'est-ce qu'il y a dans ce dossier ?
list.files()  # lister tous les fichiers
```
:::

**R travaille toujours dans UN dossier √† la fois !**  
C'est son "bureau" o√π il cherche vos fichiers par d√©faut.

---

## Bien organiser son projet R {.smaller}

::: {.callout-note}
## Structure recommand√©e
```
üìÅ Mon_Projet_R/
  üìÅ code/              # tous vos scripts R
    üìÑ analyse.R
    üìÑ graphiques.R
  üìÅ data/              # tous vos fichiers CSV, Excel
    üìÑ titanic.csv
    üìÑ sondage.xlsx  
  üìÅ graphs/            # vos graphiques export√©s
    üìÑ histogram_ages.png
  üìÅ outputs/           # vos r√©sultats et rapports
    üìÑ resultats.csv
```
:::

**Pourquoi c'est important ?**

- Tout est au m√™me endroit
- Facile de retrouver ses fichiers
- On peut partager le dossier complet √† quelqu'un

---

## Changer le dossier de travail de R {.smaller}

**M√©thode 1 : Avec du code**
```{r}
#| eval: false
#| code-copy: true
# Changer vers mon dossier de projet
setwd("C:/Documents/Universit√©/Mon_Projet_R")   # Windows
setwd("/Users/nom/Documents/Mon_Projet_R")      # Mac

# V√©rifier que √ßa a march√©
getwd()
```

::: {.fragment}
**M√©thode 2 : Menu RStudio**
`Session` ‚Üí `Set Working Directory` ‚Üí `Choose Directory...`
:::

::: {.callout-warning}
**Attention :** Il faut refaire `setwd()` √† chaque fois qu'on ouvre RStudio !
:::

---

## Lien entre RStudio et votre dossier {.smaller}

::: {.columns}
::: {.column width="50%"}
**Dans RStudio :**

- **Console** : `getwd()` montre o√π on est
- **Panneau Files** (bas-droite) : navigue dans les dossiers
- **Environment** : vos objets R en m√©moire

:::

::: {.column width="50%"}
**Sur votre ordinateur :**

- **Explorateur de fichiers** (Windows) ou **Finder** (Mac)
- M√™me structure de dossiers
- Les fichiers existent vraiment !

:::
:::

::: {.callout-tip}
## Astuce
Le panneau **Files** de RStudio montre le m√™me contenu que `list.files()` !
:::

---

## Maintenant on peut charger nos donn√©es ! {.smaller}

::: {.callout-success}
**M√©thode propre**

1. Cr√©ez un dossier pour votre projet
2. Mettez-y vos fichiers de donn√©es  
3. Utilisez `setwd()` pour y aller
4. Maintenant R trouve vos fichiers !
:::

```{r}
#| eval: false
#| code-copy: true
# √âtapes pratiques :
setwd("C:/Mon_Projet_R")              # Remplacer par cotre propre chemin
list.files()                          # voir mes dossiers : code, data, graphs...
donnees <- read.csv("data/titanic.csv")  # charger depuis le dossier data
```

**Prochaine slide :** On va charger les vraies donn√©es du Titanic !


---

## Charger de vraies donn√©es {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

Utilisons les donn√©es **Titanic** pour pratiquer !

```{r}
#| code-copy: true
# Charger les donn√©es Titanic
titanic <- read.csv("data/titanic.csv")

# Premier coup d'≈ìil
head(titanic, 3)
```

::: {.callout-tip}
## T√©l√©chargez les donn√©es
Cliquez sur ce [lien](https://web.stanford.edu/class/archive/cs/cs109/cs109.1166/stuff/titanic.csv) 

Attention de bien sp√©cifier votre chemin d'acc√®s!
:::
:::

---

## Explorer la structure des donn√©es {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Toujours commencer par comprendre nos donn√©es**

```{r}
#| code-copy: true
# Informations de base
dim(titanic)          # dimensions (lignes x colonnes)
names(titanic)        # noms des colonnes
nrow(titanic)         # nombre de lignes
ncol(titanic)         # nombre de colonnes
```
:::

---

## Examiner la structure d√©taill√©e {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Structure compl√®te des donn√©es
str(titanic)
```

::: {.fragment}
```{r}
#| code-copy: true
# Aper√ßu moderne avec glimpse (dplyr)
library(dplyr)
glimpse(titanic)
```
:::

**Ces fonctions montrent :** types de variables, premi√®res valeurs, dimensions
:::

---

## R√©sum√© statistique des variables {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# R√©sum√© statistique de toutes les variables
summary(titanic)
```

**Ce r√©sum√© nous r√©v√®le :**
Moyennes, m√©dianes, quartiles pour les variables num√©riques | Fr√©quences pour les variables cat√©gorielles | Pr√©sence de valeurs manquantes (NA's)
:::

---

## G√©rer les valeurs manquantes {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Compter les valeurs manquantes par colonne
colSums(is.na(titanic))
```

::: {.fragment}
```{r}
#| code-copy: true
# Compter les NA dans une colonne sp√©cifique
sum(is.na(titanic$Age))

# Voir quels passagers ont un √¢ge manquant
head(titanic[is.na(titanic$Age), ])
```
:::

::: {.callout-note}
**na.rm = TRUE** dans les fonctions statistiques ignore les valeurs manquantes
:::
:::

---

## Analyse des variables individuelles {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Variables cat√©gorielles : compter les occurrences
table(titanic$Survived)    # survivants
table(titanic$Pclass)      # classes
table(titanic$Sex)         # sexe
```

::: {.fragment}
```{r}
#| code-copy: true
# En pourcentages
prop.table(table(titanic$Survived)) * 100
```
:::
:::

---

## Analyse des variables num√©riques {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Statistiques sur l'√¢ge
mean(titanic$Age, na.rm = TRUE)     # √¢ge moyen
median(titanic$Age, na.rm = TRUE)   # √¢ge m√©dian
sd(titanic$Age, na.rm = TRUE)       # √©cart-type
range(titanic$Age, na.rm = TRUE)    # min et max
```

::: {.fragment}
```{r}
#| code-copy: true
# Statistiques sur le prix du billet
summary(titanic$Fare)
```
:::
:::

---

## Analyse crois√©e de variables {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Croiser deux variables cat√©gorielles
table(titanic$Pclass, titanic$Survived)
```

::: {.fragment}
```{r}
#| code-copy: true
# Ajouter les noms de lignes/colonnes pour clart√©
table(Classe = titanic$Pclass, Surv√©cu = titanic$Survived)
```
:::

**Ce tableau montre :** r√©partition des survivants selon la classe
:::

---

## Manipulation des donn√©es avec dplyr {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Le package dplyr facilite la manipulation de donn√©es**

```{r}
#| code-copy: true
# Charger dplyr (ou tidyverse)
library(dplyr)
```

**Fonctions principales :**

- `select()` : s√©lectionner des colonnes
- `filter()` : filtrer des lignes
- `mutate()` : cr√©er/modifier des variables
- `group_by()` + `summarise()` : grouper et r√©sumer
:::

---

## S√©lectionner des colonnes {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Garder seulement certaines colonnes
titanic_simple <- titanic %>%
  select(Survived, Pclass, Sex, Age, Fare)

head(titanic_simple, 3)
```

:::

---

## Filtrer des lignes {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Filtrer les passagers de premi√®re classe
premiere_classe <- titanic %>%
  filter(Pclass == 1)

nrow(premiere_classe)  # combien de passagers ?
```

::: {.fragment}
```{r}
#| code-copy: true
# Filtres multiples
adultes_survie <- titanic %>%
  filter(Age >= 18, Survived == 1)

nrow(adultes_survie)
```
:::

**Op√©rateurs de filtre :** `==`, `!=`, `>`, `<`, `>=`, `<=`, `%in%`
:::

---

## Cr√©er de nouvelles variables {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Cr√©er une variable cat√©gorielle √¢ge
titanic <- titanic %>%
  mutate(groupe_age = ifelse(Age < 18, "Enfant", "Adulte"))

table(titanic$groupe_age)
```

::: {.fragment}
```{r}
#| code-copy: true
# Cr√©er plusieurs variables en une fois
titanic <- titanic %>%
  mutate(
    prix_eleve = ifelse(Fare > 50, "Cher", "Abordable"),
    taille_famille = Siblings.Spouses.Aboard + Parents.Children.Aboard + 1  # inclure le passager lui-m√™me
  )

# Visualiser les premi√®res lignes des nouvelles variables
titanic_newvars <- titanic %>%
  select(groupe_age, prix_eleve, taille_famille)

head(titanic_newvars)
```
:::
:::

---

## Nettoyage de donn√©es avanc√© {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Strat√©gie pour g√©rer les valeurs manquantes dans la variable Age
# √âtape 1: Remplacer les NA par la m√©diane des √¢ges existants
titanic <- titanic %>%
  mutate(Age = ifelse(is.na(Age),                    # SI l'√¢ge est manquant (NA)
                      median(Age, na.rm = TRUE),      # ALORS utiliser la m√©diane
                      Age))                           # SINON garder l'√¢ge original

# √âtape 2: V√©rifier que le remplacement a fonctionn√©
sum(is.na(titanic$Age))  # Compter combien de NA restent (devrait √™tre 0)
```

::: {.fragment}
```{r}
#| code-copy: true
# Standardiser les noms de colonnes (optionnel)
titanic <- titanic %>%
  rename(
    survie = Survived,
    classe = Pclass,
    sexe = Sex
  )
```
:::
:::

---

## Grouper et r√©sumer {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Statistiques par groupe
titanic %>%
  group_by(classe) %>%
  summarise(
    nb_passagers = n(),
    nb_survivants = sum(survie),
    taux_survie = round(mean(survie) * 100, 1),
    age_moyen = round(mean(Age, na.rm = TRUE), 1)
  )
```

**La fonction `n()` compte le nombre de lignes dans chaque groupe**
:::

---

## Groupements multiples {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
# Analyser par classe ET sexe
resume_complet <- titanic %>%
  group_by(classe, sexe) %>%
  summarise(
    nb_passagers = n(),
    taux_survie = round(mean(survie) * 100, 1)
  )

resume_complet
```
:::

---

## Graphiques simples : graphiques en barres {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Commen√ßons par le plus simple : compter des cat√©gories**

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
library(ggplot2)

# Nombre de passagers par classe
ggplot(titanic, aes(x = factor(classe))) +
  geom_bar()
```
:::

---

## Observation: la fonction factor() : transformer en cat√©gories {.smaller background-color="rgba(206, 87, 87, 1)"}

::: {style="color: #333;"}

**Pourquoi `factor(classe)` dans nos graphiques ?**

```{r}
#| code-copy: true
# Notre variable classe contient des chiffres
class(titanic$classe)  # "numeric" 
table(titanic$classe)  # 1, 2, 3
```

::: {.fragment}
```{r}
#| code-copy: true
# R peut les voir comme des NOMBRES ou comme des CAT√âGORIES
# factor() dit √† R : "Traite √ßa comme des cat√©gories !"
class(factor(titanic$classe))  # "factor"
```
:::
:::

---

## Observation: la fonction factor() : transformer en cat√©gories {.smaller background-color="rgba(206, 87, 87, 1)"}

::: {style="color: #333;"}

**Diff√©rence visuelle dans les graphiques :**

- Sans `factor()` : axe continu avec espaces bizarres
- Avec `factor()` : barres bien distinctes pour chaque classe

::: {.callout-tip}
**Character vs Factor :** `as.character()` marche aussi, mais `factor()` nous donne plus de contr√¥le sur l'ordre d'affichage !
:::
:::

---

## Graphiques simples : graphiques en barres {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**√âl√©ments de base :**

- `ggplot()` : initialise le graphique avec les donn√©es
- `aes()` : sp√©cifie quelles variables utiliser
- `geom_bar()` : type de graphique (barres)
:::

---

## Ajouter des couleurs et labels {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# M√™me graphique, mais plus joli
ggplot(titanic, aes(x = factor(classe))) +
  geom_bar(fill = "steelblue", color = "white") +
  labs(
    title = "R√©partition des passagers par classe",
    x = "Classe", 
    y = "Nombre de passagers"
  ) +
  theme_minimal()
```
:::

---

## Ajouter des couleurs et labels {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Nouveaux √©l√©ments :**

- `fill` : couleur de remplissage des barres
- `labs()` : ajouter titres et √©tiquettes
- `theme_minimal()` : style √©pur√©
:::

---

## Graphiques empil√©s : deux variables {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Nouvelle technique :** `fill = factor(survie)` dans `aes()` cr√©e des couleurs automatiques selon la survie

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Survivants par classe (barres empil√©es)
ggplot(titanic, aes(x = factor(classe), fill = factor(survie))) +
  geom_bar() +
  labs(
    title = "Survivants par classe sur le Titanic",
    x = "Classe", 
    y = "Nombre de passagers",
    fill = "Surv√©cu"
  ) +
  theme_minimal()

```

:::

---

## Graphiques en proportions {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**`position = "fill"`** transforme en proportions (0 √† 1) pour comparer les taux

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Proportions plut√¥t que nombres absolus
ggplot(titanic, aes(x = factor(classe), fill = factor(survie))) +
  geom_bar(position = "fill") +
  labs(
    title = "Taux de survie par classe",
    x = "Classe", 
    y = "Proportion",
    fill = "Surv√©cu"
  ) +
  theme_minimal()
```

:::

---

## Histogrammes : distribution d'une variable {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Distribution des √¢ges
ggplot(titanic, aes(x = Age)) +
  geom_histogram(bins = 20, fill = "lightblue", color = "white", alpha = 0.7) +
  labs(
    title = "Distribution des √¢ges sur le Titanic",
    x = "√Çge", 
    y = "Nombre de passagers"
  ) +
  theme_minimal()
```
:::

---

## Histogrammes : distribution d'une variable {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Nouveaux √©l√©ments :**

- `geom_histogram()` : pour variables num√©riques continues
- `bins = 20` : nombre de barres
- `alpha = 0.7` : transparence (0 = invisible, 1 = opaque)
:::

---

## Nuages de points {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**`geom_point()`** cr√©e un nuage de points pour explorer les relations entre variables num√©riques

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Relation √¢ge-prix du billet
ggplot(titanic, aes(x = Age, y = Fare)) +
  geom_point(alpha = 0.6) +
  labs(
    title = "√Çge vs Prix du billet",
    x = "√Çge", 
    y = "Prix du billet"
  ) +
  theme_minimal()
```

:::

---

## Nuages de points avec couleurs {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**La couleur r√©v√®le des patterns :** les survivants avaient-ils des billets plus chers ?

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Ajouter la survie comme couleur
ggplot(titanic, aes(x = Age, y = Fare, color = factor(survie))) +
  geom_point(alpha = 0.6) +
  labs(
    title = "√Çge vs Prix du billet selon la survie",
    x = "√Çge", 
    y = "Prix du billet",
    color = "Surv√©cu"
  ) +
  theme_minimal()
```

:::

---

## Sauvegarder notre travail {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

```{r}
#| eval: false
#| code-copy: true
# Sauvegarder le dernier graphique
ggsave("age_prix_survie.png", width = 10, height = 6)

# Sauvegarder des donn√©es nettoy√©es
write.csv(titanic, "titanic_nettoye.csv", row.names = FALSE)

# Sauvegarder nos r√©sultats d'analyse
write.csv(resume_complet, "analyse_survie_classe_sexe.csv", row.names = FALSE)
```

**Toujours sauvegarder :** scripts, donn√©es nettoy√©es, graphiques, r√©sultats
:::

---

## Messages d'erreur : pas de panique ! {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

**Erreurs courantes et solutions :**

```{r}
#| eval: false
#| code-copy: true
# Erreur : objet non trouv√©
mean(donnees$age)
# Error: object 'donnees' not found
# ‚Üí V√©rifier le nom de l'objet

# Erreur : colonne inexistante  
titanic$ages  # au lieu de Age
# ‚Üí Utiliser names(titanic) pour voir les vraies colonnes

# Erreur : parenth√®se manquante
mean(titanic$Age
# ‚Üí V√©rifier que toutes les parenth√®ses sont ferm√©es
```

**R√©flexes :** lire le message, v√©rifier l'orthographe, tester ligne par ligne
:::

---

## Bonnes pratiques pour l'analyse {.smaller background-color="#4A90A4"}

::: {style="color: #333;"}

::: {.callout-tip}
## Workflow recommand√©

1. **Explorer d'abord :** `str()`, `summary()`, `glimpse()`
2. **Nettoyer ensuite :** g√©rer les NA, corriger les types
3. **Analyser pas √† pas :** une variable, puis des croisements
4. **Visualiser pour comprendre :** graphiques simples puis complexes
5. **Documenter et sauvegarder :** commenter le code, sauvegarder les r√©sultats
:::

```{r}
#| eval: false
#| code-copy: true
# Exemple de code bien structur√©
# 1. Chargement et exploration
titanic <- read.csv("data/titanic.csv")
str(titanic)

# 2. Nettoyage
titanic <- titanic %>% 
  mutate(Age = ifelse(is.na(Age), median(Age, na.rm = TRUE), Age))

# 3. Analyse et visualisation
# ... votre analyse ...
```
:::

---

## Ce qu'on a appris aujourd'hui {.smaller}

::: {.callout-note}
## R√©capitulatif

‚úÖ Interface RStudio et console  
‚úÖ Objets, vecteurs et data frames  
‚úÖ Types de donn√©es et fonctions  
‚úÖ Import et exploration de donn√©es  
‚úÖ Analyse descriptive (moyennes, tableaux)  
‚úÖ Premiers graphiques avec ggplot2  
‚úÖ Manipulation avec dplyr (filter, select, group_by)
:::

**Vous pouvez maintenant :**

- Charger des donn√©es
- Les explorer et les r√©sumer
- Cr√©er des graphiques de base
- Faire des analyses descriptives simples

---

## Ressources pour continuer {.smaller}

**Documentation et aide :**

- `?fonction` dans R (ex: `?mean`)
- [R Documentation](https://www.rdocumentation.org/)
- [RStudio Cheatsheets](https://posit.co/resources/cheatsheets/)

**Apprentissage :**

- [swirl](https://swirlstats.com/) - apprendre R dans R
- [R for Data Science](https://r4ds.hadley.nz/) (gratuit en ligne)
- ChatGPT pour d√©boguer vos erreurs !

**Communaut√© :**

- [Stack Overflow](https://stackoverflow.com/questions/tagged/r)
- [RStudio Community](https://community.rstudio.com/)

---

## Questions ? {.smaller}

::: {.callout-tip appearance="simple"}
## Merci pour votre attention !

**Contact :** etienne.proulx.2@ulaval.ca

**Tous les codes sont copiables depuis cette pr√©sentation**
:::


**Prochaines √©tapes :** Continuez avec vos propres donn√©es et n'h√©sitez pas √† exp√©rimenter !