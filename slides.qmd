---
title: "Initiation √† l'analyse des donn√©es avec R"
subtitle: "Formation th√©orique | 9h √† 12h"
author: "√âtienne Proulx"
date: today
date-format: "D MMMM YYYY"
lang: fr
format:
  revealjs:
    theme: simple
    logo: https://upload.wikimedia.org/wikipedia/en/thumb/9/90/Ulaval_Shield.svg/800px-Ulaval_Shield.svg.png
    footer: "[Facult√© des sciences sociales](https://www.fss.ulaval.ca)"
    transition: slide
    transition-speed: fast
    code-fold: false
    code-overflow: wrap
    code-copy: true
    incremental: false
    slide-number: true
    show-slide-number: all
    
execute:
  echo: true
  eval: true
  warning: false
  message: false
---

```{r setup}
#| include: false
library(ggplot2)
library(dplyr)
library(readr)
```

## Objectifs de l'atelier {.smaller}

- Introduire R pour l'analyse de donn√©es
  - Interface RStudio et console
  - Les objets et types de donn√©es
  - Les fonctions et packages
  - Import et manipulation de donn√©es
  - Analyse descriptive et graphiques

> Le but est que vous puissiez sortir d'ici avec une compr√©hension de base de R et que vous soyez capable d'aller chercher des ressources pour continuer √† apprendre.

---

## Qu'est-ce que R ? {.smaller}

::: {.columns}
::: {.column width="50%"}
**R c'est :**

- Un langage de programmation statistique
- Gratuit et open-source  
- Une communaut√© active mondiale
- Des milliers de packages sp√©cialis√©s
  
:::

::: {.column width="50%"}
**Pourquoi R ?**

- Reproductibilit√© des analyses
- Tr√®s utilis√© en sciences sociales
- Extensible avec les packages
- Permet l'automatisation
  
:::
:::

> Aujourd'hui nous allons apprendre les bases pour analyser de vraies donn√©es 

---

## Avant de commencer : RStudio {.smaller}

::: {.callout-tip}
## Ouvrons RStudio ensemble !
:::

**Les 4 panneaux de RStudio :**

1. **Console** (en bas √† gauche) : o√π s'ex√©cutent les commandes
2. **Script** (en haut √† gauche) : o√π on √©crit notre code  
3. **Environment** (en haut √† droite) : nos objets
4. **Files/Plots** (en bas √† droite) : fichiers et graphiques

::: {.fragment}
```{r}
#| eval: false
#| code-copy: true
# Notre premi√®re commande 
print("Bonjour tout le monde!")
```
:::

---

## R comme calculatrice {.smaller}

::: {.callout-tip}
## √Ä tester dans la console
:::

```{r}
#| code-copy: true
# Op√©rations de base
2 + 3
10 * 5
15 / 3
sqrt(16)
```

::: {.fragment}
```{r}
#| code-copy: true
# Un peu plus complexe
(10 + 5) * 2
2^3  # puissance
```
:::

---

## Cr√©er nos premiers objets {.smaller}

En R, on sauvegarde tout dans des **objets** avec `<-`

```{r}
#| code-copy: true
# Cr√©er des objets simples
mon_age <- 30
mon_nom <- "√âtienne" 
ma_note <- 85.5
```

::: {.fragment}
```{r}
#| code-copy: true
# Voir le contenu
mon_age
mon_nom
ma_note
```
:::

::: {.callout-note}
**Important :** Les objets apparaissent dans le panneau Environment !
:::

---

## Les vecteurs : groupes de valeurs {.smaller}

```{r}
#| code-copy: true
# Cr√©er des vecteurs avec c()
ages <- c(23, 45, 31, 28, 35)
noms <- c("Alice", "Bob", "Claire", "David", "Emma")
notes <- c(85, 78, 92, 88, 90)
```

::: {.fragment}
```{r}
#| code-copy: true
# Explorer nos vecteurs
ages
length(ages)  # nombre d'√©l√©ments
mean(ages)    # moyenne
```
:::

---

## Types de donn√©es {.smaller}

```{r}
#| code-copy: true
# V√©rifier le type de nos objets
class(ages)        # num√©rique
class(noms)        # caract√®re (texte)
class(c(TRUE, FALSE))  # logique
```

::: {.fragment}
```{r}
#| code-copy: true
# R convertit automatiquement si n√©cessaire
melange <- c(1, 2, "trois")
melange
class(melange)  # tout devient du texte !
```
:::

---

## Notre premier tableau de donn√©es {.smaller}

Un **data frame** = tableau avec lignes et colonnes

```{r}
#| code-copy: true
# Cr√©er notre tableau d'√©tudiants
etudiants <- data.frame(
  nom = c("Alice", "Bob", "Claire", "David", "Emma"),
  age = c(23, 25, 22, 24, 26), 
  note = c(85, 78, 92, 88, 90),
  programme = c("Socio", "√âco", "Socio", "Psycho", "√âco")
)
```

::: {.fragment}
```{r}
#| code-copy: true
# Regarder notre tableau
etudiants
```
:::

---

## Explorer un data frame {.smaller}

```{r}
#| code-copy: true
# Informations g√©n√©rales
dim(etudiants)       # dimensions (lignes x colonnes)
nrow(etudiants)      # nombre de lignes
ncol(etudiants)      # nombre de colonnes
names(etudiants)     # noms des colonnes
```

::: {.fragment}
```{r}
#| code-copy: true
# Aper√ßu du contenu
head(etudiants, 3)   # premi√®res lignes
str(etudiants)       # structure d√©taill√©e
```
:::

---

## Acc√©der aux colonnes {.smaller}

**Avec le symbole `$` (recommand√©) :**
```{r}
#| code-copy: true
etudiants$nom
etudiants$note
mean(etudiants$age)  # √¢ge moyen
```

::: {.fragment}
**Avec les crochets `[ ]` :**
```{r}
#| code-copy: true
etudiants[, "nom"]          # par nom
etudiants[, 1]              # par position
etudiants[, c("nom", "age")] # plusieurs colonnes
```
:::

---

## Les fonctions : nos outils {.smaller}

Une **fonction** fait une t√¢che : `fonction(argument1, argument2)`

```{r}
#| code-copy: true
# Fonctions statistiques essentielles
mean(etudiants$note)      # moyenne
median(etudiants$note)    # m√©diane
sd(etudiants$note)        # √©cart-type
min(etudiants$note)       # minimum
max(etudiants$note)       # maximum
```

::: {.fragment}
```{r}
#| code-copy: true
# R√©sum√© complet
summary(etudiants$note)
```
:::

---

## Les packages : √©tendre R {.smaller}

::: {.callout-important}
## Installation vs Chargement
- `install.packages("nom")` : installer (1 seule fois)
- `library(nom)` : charger (√† chaque session)
:::

```{r}
#| eval: false
#| code-copy: true
# Installer les packages essentiels (√† faire une fois)
install.packages("readr")     # importer des donn√©es
install.packages("dplyr")     # manipuler des donn√©es  
install.packages("ggplot2")   # faire des graphiques
```

::: {.fragment}
```{r}
#| code-copy: true
# Charger les packages (√† chaque session)
library(readr)
library(dplyr) 
library(ggplot2)
```
:::

---

## Comprendre l'organisation de votre ordinateur {.smaller}

::: {.callout-important}
## Votre ordinateur = une grande biblioth√®que
Chaque fichier a une **adresse pr√©cise** pour le retrouver !
:::

**Exemple d'organisation :**
```
üìÅ Mon ordinateur
  üìÅ Documents
    üìÅ Universit√©
      üìÅ Session_Hiver2024
        üìÅ Cours_R
          üìÑ donnees.csv
          üìÑ mon_script.R
```

**L'adresse compl√®te (chemin) :**

- Windows : `C:/Documents/Universit√©/Session_Hiver2024/Cours_R/`
- Mac : `/Users/votrenom/Documents/Universit√©/Session_Hiver2024/Cours_R/`

---

## O√π travaille R en ce moment ? {.smaller}

::: {.callout-tip}
## √Ä tester maintenant !
:::

```{r}
#| code-copy: true
# O√π suis-je actuellement ?
getwd()  # "get working directory" = obtenir le dossier de travail
```

::: {.fragment}
```{r}
#| code-copy: true
# Qu'est-ce qu'il y a dans ce dossier ?
list.files()  # lister tous les fichiers
```
:::

**R travaille toujours dans UN dossier √† la fois !**  
C'est son "bureau" o√π il cherche vos fichiers par d√©faut.

---

## Bien organiser son projet R {.smaller}

::: {.callout-note}
## Structure recommand√©e
```
üìÅ Mon_Projet_R/
  üìÅ code/              # tous vos scripts R
    üìÑ analyse.R
    üìÑ graphiques.R
  üìÅ data/              # tous vos fichiers CSV, Excel
    üìÑ titanic.csv
    üìÑ sondage.xlsx  
  üìÅ graphs/            # vos graphiques export√©s
    üìÑ histogram_ages.png
  üìÅ outputs/           # vos r√©sultats et rapports
    üìÑ resultats.csv
```
:::

**Pourquoi c'est important ?**

- Tout est au m√™me endroit
- Facile de retrouver ses fichiers
- On peut partager le dossier complet √† quelqu'un

---

## Changer le dossier de travail de R {.smaller}

**M√©thode 1 : Avec du code**
```{r}
#| eval: false
#| code-copy: true
# Changer vers mon dossier de projet
setwd("C:/Documents/Universit√©/Mon_Projet_R")   # Windows
setwd("/Users/nom/Documents/Mon_Projet_R")      # Mac

# V√©rifier que √ßa a march√©
getwd()
```

::: {.fragment}
**M√©thode 2 : Menu RStudio**
`Session` ‚Üí `Set Working Directory` ‚Üí `Choose Directory...`
:::

::: {.callout-warning}
**Attention :** Il faut refaire `setwd()` √† chaque fois qu'on ouvre RStudio !
:::

---

## Lien entre RStudio et votre dossier {.smaller}

::: {.columns}
::: {.column width="50%"}
**Dans RStudio :**

- **Console** : `getwd()` montre o√π on est
- **Panneau Files** (bas-droite) : navigue dans les dossiers
- **Environment** : vos objets R en m√©moire

:::

::: {.column width="50%"}
**Sur votre ordinateur :**

- **Explorateur de fichiers** (Windows) ou **Finder** (Mac)
- M√™me structure de dossiers
- Les fichiers existent vraiment !

:::
:::

::: {.callout-tip}
## Astuce
Le panneau **Files** de RStudio montre le m√™me contenu que `list.files()` !
:::

---

## Maintenant on peut charger nos donn√©es ! {.smaller}

::: {.callout-success}
## M√©thode propre
1. Cr√©ez un dossier pour votre projet
2. Mettez-y vos fichiers de donn√©es  
3. Utilisez `setwd()` pour y aller
4. Maintenant R trouve vos fichiers !
:::

---

```{r}
#| eval: false
#| code-copy: true
# √âtapes pratiques :
setwd("C:/Mon_Projet_R")              # aller dans mon dossier
list.files()                          # voir mes dossiers : code, data, graphs...
donnees <- read.csv("data/titanic.csv")  # charger depuis le dossier data
```

**Prochaine slide :** On va charger les vraies donn√©es du Titanic !

---

## Charger de vraies donn√©es {.smaller}

Utilisons les donn√©es **Titanic** pour pratiquer !

```{r}
#| code-copy: true
# Charger les donn√©es Titanic (int√©gr√©es dans R)
titanic <- read.csv("https://web.stanford.edu/class/archive/cs/cs109/cs109.1166/stuff/titanic.csv")

# Premiers coups d'≈ìil
head(titanic, 3)
```

---

## Explorer les donn√©es Titanic {.smaller}

```{r}
#| code-copy: true
# Informations g√©n√©rales
dim(titanic)
names(titanic)
```

::: {.fragment}
```{r}
#| code-copy: true
# R√©sum√© des variables
summary(titanic)
```
:::

---

## Analyse des variables qualitatives {.smaller}

```{r}
#| code-copy: true
# Compter les survivants
table(titanic$Survived)
```

::: {.fragment}
```{r}
#| code-copy: true
# En pourcentages
prop.table(table(titanic$Survived)) * 100
```
:::

::: {.fragment}
```{r}
#| code-copy: true
# Survivants par classe
table(titanic$Pclass, titanic$Survived)
```
:::

---

## Analyse des variables quantitatives {.smaller}

```{r}
#| code-copy: true
# Statistiques sur l'√¢ge
mean(titanic$Age, na.rm = TRUE)   # na.rm = ignore les valeurs manquantes
median(titanic$Age, na.rm = TRUE)
sd(titanic$Age, na.rm = TRUE)
```

::: {.fragment}
```{r}
#| code-copy: true
# Statistiques sur le prix du billet
summary(titanic$Fare)
```
:::

::: {.callout-note}
**na.rm = TRUE** ignore les valeurs manquantes (NA)
:::

---

## Notre premier graphique {.smaller}

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Graphique des survivants par classe
ggplot(titanic, aes(x = factor(Pclass), fill = factor(Survived))) +
  geom_bar() +
  labs(title = "Survivants par classe sur le Titanic",
       x = "Classe", y = "Nombre de passagers",
       fill = "Surv√©cu") +
  theme_minimal()
```

---

## Anatomie d'un graphique ggplot {.smaller}

```{r}
#| eval: false
#| code-copy: true
ggplot(titanic, aes(x = factor(Pclass), fill = factor(Survived))) +
  geom_bar() +
  labs(title = "Survivants par classe sur le Titanic",
       x = "Classe", y = "Nombre de passagers", 
       fill = "Surv√©cu") +
  theme_minimal()
```

**D√©composition :**

- `ggplot()` : initialise le graphique
- `aes()` : d√©finit les variables
- `geom_bar()` : type de graphique (barres)
- `labs()` : titres et √©tiquettes
- `theme_minimal()` : style du graphique

---

## Histogramme des √¢ges {.smaller}

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Distribution des √¢ges
ggplot(titanic, aes(x = Age)) +
  geom_histogram(bins = 20, fill = "steelblue", alpha = 0.7) +
  labs(title = "Distribution des √¢ges sur le Titanic",
       x = "√Çge", y = "Nombre de passagers") +
  theme_minimal()
```

---

## Nuage de points : √¢ge vs prix {.smaller}

```{r}
#| code-copy: true
#| fig-height: 4
#| fig-align: center
# Relation √¢ge-prix du billet
ggplot(titanic, aes(x = Age, y = Fare, color = factor(Survived))) +
  geom_point(alpha = 0.6) +
  labs(title = "√Çge vs Prix du billet",
       x = "√Çge", y = "Prix du billet", 
       color = "Surv√©cu") +
  theme_minimal()
```

---

## Filtrer et s√©lectionner {.smaller}

```{r}
#| code-copy: true
# S√©lectionner seulement certaines colonnes
titanic_simple <- titanic %>%
  select(Survived, Pclass, Sex, Age, Fare)

head(titanic_simple, 3)
```

::: {.fragment}
```{r}
#| code-copy: true
# Filtrer les passagers de premi√®re classe
premiere_classe <- titanic %>%
  filter(Pclass == 1)

nrow(premiere_classe)  # combien de passagers ?
```
:::

---

## Grouper et r√©sumer {.smaller}

```{r}
#| code-copy: true
# Taux de survie par classe
titanic %>%
  group_by(Pclass) %>%
  summarise(
    nb_passagers = n(),
    nb_survivants = sum(Survived),
    taux_survie = mean(Survived) * 100
  )
```

---

## Taux de survie par sexe {.smaller}

```{r}
#| code-copy: true
# Analyse par sexe
titanic %>%
  group_by(Sex) %>%
  summarise(
    nb_passagers = n(),
    taux_survie = round(mean(Survived) * 100, 1)
  )
```

::: {.fragment}
```{r}
#| code-copy: true
#| fig-height: 3
# Graphique correspondant
ggplot(titanic, aes(x = Sex, fill = factor(Survived))) +
  geom_bar(position = "fill") +
  labs(title = "Taux de survie par sexe", 
       y = "Proportion", fill = "Surv√©cu") +
  theme_minimal()
```
:::

---

## Sauvegarder notre travail {.smaller}

```{r}
#| eval: false
#| code-copy: true
# Sauvegarder un graphique
ggsave("graphique_titanic.png", width = 10, height = 6)

# Sauvegarder des donn√©es nettoy√©es
write.csv(titanic_simple, "titanic_nettoye.csv", row.names = FALSE)

# Sauvegarder notre analyse
resultats <- titanic %>%
  group_by(Pclass, Sex) %>%
  summarise(taux_survie = mean(Survived) * 100)

write.csv(resultats, "analyse_survie.csv", row.names = FALSE)
```

---

## Messages d'erreur : pas de panique ! {.smaller}

**Erreurs courantes :**

```{r}
#| eval: false
#| code-copy: true
# Objet non trouv√©
mean(donnees$age)
# Error: object 'donnees' not found

# Parenth√®se manquante  
mean(titanic$Age
# Error: unexpected end of input

# Colonne inexistante
titanic$ages  # au lieu de Age
# NULL
```

**R√©flexes :**

1. Lire le message d'erreur
2. V√©rifier l'orthographe
3. V√©rifier les parenth√®ses/guillemets
4. Utiliser `names()` pour voir les colonnes

---

## Quelques fonctions tr√®s utiles {.smaller}

```{r}
#| code-copy: true
# Explorer la structure
str(titanic)           # structure compl√®te
glimpse(titanic)       # aper√ßu moderne (dplyr)
```

::: {.fragment}
```{r}
#| code-copy: true
# G√©rer les valeurs manquantes
sum(is.na(titanic$Age))          # compter les NA
titanic_sans_na <- na.omit(titanic)  # enlever toutes les lignes avec NA
```
:::

::: {.fragment}
```{r}
#| code-copy: true
# Cr√©er de nouvelles variables
titanic$est_enfant <- ifelse(titanic$Age < 18, "Enfant", "Adulte")
table(titanic$est_enfant)
```
:::

---

## Bonnes pratiques {.smaller}

::: {.callout-tip}
## Conseils pour bien d√©buter

1. **Organisez votre travail :** utilisez des projets RStudio
2. **Nommez bien vos objets :** `donnees_titanic` plut√¥t que `df1`
3. **Commentez votre code :** utilisez `#` pour expliquer
4. **Testez √©tape par √©tape :** v√©rifiez chaque ligne
5. **Sauvegardez souvent :** scripts ET donn√©es nettoy√©es
:::

```{r}
#| eval: false
#| code-copy: true
# Exemple de code bien document√©
# Charger les donn√©es du Titanic
titanic <- read.csv("titanic.csv")

# Calculer le taux de survie moyen
taux_survie_global <- mean(titanic$Survived, na.rm = TRUE)
```

---

## Ce qu'on a appris aujourd'hui {.smaller}

::: {.callout-note}
## R√©capitulatif

‚úÖ Interface RStudio et console  
‚úÖ Objets, vecteurs et data frames  
‚úÖ Types de donn√©es et fonctions  
‚úÖ Import et exploration de donn√©es  
‚úÖ Analyse descriptive (moyennes, tableaux)  
‚úÖ Premiers graphiques avec ggplot2  
‚úÖ Manipulation avec dplyr (filter, select, group_by)
:::

**Vous pouvez maintenant :**

- Charger des donn√©es
- Les explorer et les r√©sumer
- Cr√©er des graphiques de base
- Faire des analyses descriptives simples

---

## Ressources pour continuer {.smaller}

**Documentation et aide :**

- `?fonction` dans R (ex: `?mean`)
- [R Documentation](https://www.rdocumentation.org/)
- [RStudio Cheatsheets](https://posit.co/resources/cheatsheets/)

**Apprentissage :**

- [swirl](https://swirlstats.com/) - apprendre R dans R
- [R for Data Science](https://r4ds.hadley.nz/) (gratuit en ligne)
- ChatGPT pour d√©boguer vos erreurs !

**Communaut√© :**

- [Stack Overflow](https://stackoverflow.com/questions/tagged/r)
- [RStudio Community](https://community.rstudio.com/)

---

## Questions ? {.smaller}

::: {.callout-tip appearance="simple"}
## Merci pour votre attention !

**Contact :** √âtienne Proulx  
**Tous les codes sont copiables depuis cette pr√©sentation**
:::


**Prochaines √©tapes :** Continuez avec vos propres donn√©es et n'h√©sitez pas √† exp√©rimenter !